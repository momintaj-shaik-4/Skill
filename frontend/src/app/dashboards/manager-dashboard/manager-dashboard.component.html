<div class="flex h-screen bg-slate-100 font-sans">
  <aside class="w-64 bg-slate-900 text-slate-300 flex flex-col shadow-2xl overflow-hidden z-20">
    <div class="px-6 py-4 text-center border-b border-slate-700/50">
      <div class="relative inline-block mb-4">
        <div class="w-20 h-20 bg-slate-700 rounded-full flex items-center justify-center shadow-lg ring-4 ring-slate-800">
          <i class="fa-solid fa-user-shield text-slate-400 text-3xl"></i>
        </div>
        <div class="absolute top-0 right-0 w-6 h-6 bg-green-400 rounded-full border-4 border-slate-900 animate-pulse"></div>
      </div>
      <h3 class="text-white text-xl font-semibold mb-1">{{ managerDisplayName || 'Manager' }}</h3>
      <p class="text-slate-400 text-sm">Manager</p>
    </div>
    <nav class="flex-1 px-4 py-3 space-y-1 pb-4">
      <button (click)="selectTab('dashboard')" class="w-full text-left px-4 py-2 rounded-lg flex items-center gap-4 transition-all duration-200"
        [ngClass]="{
          'bg-slate-800/80 text-white border-l-4 border-indigo-400 px-3': activeTab === 'dashboard',
          'hover:bg-slate-800/50 hover:text-white': activeTab !== 'dashboard'
        }">
        <div class="w-8 h-8 rounded-lg flex items-center justify-center text-indigo-300">
          <i class="fa-solid fa-chart-pie"></i>
        </div>
        <span class="font-medium">Dashboard</span>
      </button>
      <button (click)="selectTab('mySkills')" class="w-full text-left px-4 py-2 rounded-lg flex items-center gap-4 transition-all duration-200"
        [ngClass]="{
          'bg-slate-800/80 text-white border-l-4 border-indigo-400 px-3': activeTab === 'mySkills',
          'hover:bg-slate-800/50 hover:text-white': activeTab !== 'mySkills'
        }">
        <div class="w-8 h-8 rounded-lg flex items-center justify-center text-indigo-300">
          <i class="fa-solid fa-graduation-cap"></i>
        </div>
        <span class="font-medium">My Skills</span>
      </button>
      <button (click)="selectTab('teamSkills')" class="w-full text-left px-4 py-2 rounded-lg flex items-center gap-4 transition-all duration-200"
        [ngClass]="{
          'bg-slate-800/80 text-white border-l-4 border-indigo-400 px-3': activeTab === 'teamSkills',
          'hover:bg-slate-800/50 hover:text-white': activeTab !== 'teamSkills'
        }">
        <div class="w-8 h-8 rounded-lg flex items-center justify-center text-indigo-300">
          <i class="fa-solid fa-users"></i>
        </div>
        <span class="font-medium">Team Skills</span>
      </button>
      <button (click)="selectTab('trainingCatalog')" class="w-full text-left px-4 py-2 rounded-lg flex items-center gap-4 transition-all duration-200"
        [ngClass]="{
          'bg-slate-800/80 text-white border-l-4 border-indigo-400 px-3': activeTab === 'trainingCatalog',
          'hover:bg-slate-800/50 hover:text-white': activeTab !== 'trainingCatalog'
        }">
        <div class="w-8 h-8 rounded-lg flex items-center justify-center text-indigo-300">
          <i class="fa-solid fa-book-open"></i>
        </div>
        <span class="font-medium">Training Catalog</span>
      </button>
      <button (click)="selectTab('assignTraining')" class="w-full text-left px-4 py-2 rounded-lg flex items-center gap-4 transition-all duration-200"
        [ngClass]="{
          'bg-slate-800/80 text-white border-l-4 border-indigo-400 px-3': activeTab === 'assignTraining',
          'hover:bg-slate-800/50 hover:text-white': activeTab !== 'assignTraining'
        }">
        <div class="w-8 h-8 rounded-lg flex items-center justify-center text-indigo-300">
          <i class="fa-solid fa-laptop-code"></i>
        </div>
        <span class="font-medium">Assign Training</span>
      </button>
      <button *ngIf="managerIsTrainer" (click)="selectTab('trainerZone')" class="w-full text-left px-4 py-2 rounded-lg flex items-center gap-4 transition-all duration-200"
        [ngClass]="{
          'bg-slate-800/80 text-white border-l-4 border-indigo-400 px-3': activeTab === 'trainerZone',
          'hover:bg-slate-800/50 hover:text-white': activeTab !== 'trainerZone'
        }">
        <div class="w-8 h-8 rounded-lg flex items-center justify-center text-indigo-300">
          <i class="fa-solid fa-chalkboard-user"></i>
        </div>
        <span class="font-medium">Trainer Zone</span>
      </button>
      <button (click)="selectTab('reports')" class="w-full text-left px-4 py-2 rounded-lg flex items-center gap-4 transition-all duration-200"
        [ngClass]="{
          'bg-slate-800/80 text-white border-l-4 border-indigo-400 px-3': activeTab === 'reports',
          'hover:bg-slate-800/50 hover:text-white': activeTab !== 'reports'
        }">
        <div class="w-8 h-8 rounded-lg flex items-center justify-center text-indigo-300">
          <i class="fa-solid fa-chart-bar"></i>
        </div>
        <span class="font-medium">Reports</span>
      </button>
      <button (click)="selectTab('levels')" class="w-full text-left px-4 py-2 rounded-lg flex items-center gap-4 transition-all duration-200"
        [ngClass]="{
          'bg-slate-800/80 text-white border-l-4 border-indigo-400 px-3': activeTab === 'levels',
          'hover:bg-slate-800/50 hover:text-white': activeTab !== 'levels'
        }">
        <div class="w-8 h-8 rounded-lg flex items-center justify-center text-indigo-300">
          <i class="fa-solid fa-layer-group"></i>
        </div>
        <span class="font-medium">Levels</span>
      </button>
    </nav>
  </aside>

  <div class="flex-1 flex flex-col relative">
    <div class="absolute top-0 left-0 w-full h-full bg-slate-50 overflow-hidden -z-10">
      <div class="absolute top-0 left-0 w-1/3 h-1/3 bg-indigo-100 rounded-full blur-3xl opacity-50 animate-pulse-slow"></div>
      <div class="absolute bottom-0 right-0 w-1/2 h-1/2 bg-sky-100 rounded-full blur-3xl opacity-50 animate-pulse-slow animation-delay-2000"></div>
       <div class="absolute top-1/2 left-1/2 w-1/2 h-1/2 bg-purple-100 rounded-full blur-3xl opacity-30 animate-pulse-slow animation-delay-4000"></div>
    </div>
    
    <header class="flex justify-between items-center bg-white/80 backdrop-blur-sm px-8 py-3 border-b border-slate-200/60 sticky top-0 z-10">
      <div class="flex items-center gap-4">
        <i class="fa-solid fa-user-tie text-indigo-500 text-2xl"></i>
        <h1 class="text-xl font-bold text-slate-800">Manager Dashboard</h1>
      </div>
      <div class="flex items-center gap-6">
        <span class="text-slate-600 text-sm" *ngIf="manager">Welcome, <span class="font-bold text-slate-900">{{ managerDisplayName }}</span> ({{ manager.id }})</span>
        <button (click)="logout()" class="bg-slate-700 text-white px-4 py-2 rounded-full font-semibold hover:bg-slate-800 transition-colors duration-200 shadow-sm text-sm">
          <i class="fa-solid fa-right-from-bracket mr-2"></i>Logout
        </button>
      </div>
    </header>

    <main class="flex-1 p-6 lg:p-8 overflow-y-auto">
      <div *ngIf="isLoading" class="flex justify-center items-center h-full text-slate-500">
        <svg class="animate-spin -ml-1 mr-3 h-10 w-10 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <span class="text-lg">Loading your data...</span>
      </div>
      
      <div *ngIf="errorMessage && !isLoading" class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg" role="alert">
        <strong class="font-bold">Error!</strong>
        <span class="block sm:inline ml-2">{{ errorMessage }}</span>
      </div>

      <div *ngIf="!isLoading && !errorMessage && activeTab === 'dashboard' && manager" class="space-y-6">
        <div #animatedElement class="animate-on-scroll relative bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 text-white p-8 rounded-2xl shadow-2xl shadow-indigo-900/20 overflow-hidden">
            <div class="absolute inset-0 bg-grid-pattern opacity-10"></div>
            <div class="absolute -right-16 -bottom-16 opacity-10">
                <i class="fa-solid fa-chart-simple text-[200px] transform rotate-[-15deg]"></i>
            </div>
            <div class="relative z-10">
                <h2 class="text-3xl font-bold tracking-tight">Welcome back, {{ managerDisplayName }}!</h2>
                <p class="text-indigo-100/90 mt-2">Here's a summary of your personal and team skill status.</p>
                <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                    <div (click)="openDetailModal('mySkillsMet')" class="bg-white/10 p-4 rounded-xl ring-1 ring-white/20 backdrop-blur-sm cursor-pointer hover:bg-white/25 transition-colors duration-300">
                        <p class="text-sm text-indigo-100">My Skills Met</p>
                        <p class="text-3xl font-extrabold mt-1">{{ getMySkillsMetCount() }}</p>
                    </div>
                    <div (click)="openDetailModal('mySkillGaps')" class="bg-white/10 p-4 rounded-xl ring-1 ring-white/20 backdrop-blur-sm cursor-pointer hover:bg-white/25 transition-colors duration-300">
                        <p class="text-sm text-indigo-100">My Skill Gaps</p>
                        <p class="text-3xl font-extrabold mt-1">{{ (manager.skills.length || 0) - getMySkillsMetCount() }}</p>
                    </div>
                    <div (click)="openDetailModal('teamSkillsMet')" class="bg-white/10 p-4 rounded-xl ring-1 ring-white/20 backdrop-blur-sm cursor-pointer hover:bg-white/25 transition-colors duration-300">
                        <p class="text-sm text-indigo-100">Team Skills Met</p>
                        <p class="text-3xl font-extrabold mt-1">{{ teamSkillsMet }}</p>
                    </div>
                    <div (click)="openDetailModal('teamSkillGaps')" class="bg-white/10 p-4 rounded-xl ring-1 ring-white/20 backdrop-blur-sm cursor-pointer hover:bg-white/25 transition-colors duration-300">
                        <p class="text-sm text-indigo-100">Team Skills Gaps</p>
                        <p class="text-3xl font-extrabold mt-1">{{ teamSkillsGap }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <div #animatedElement (click)="openDetailModal('totalMembers')" class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-500 font-medium">Total Team Members</p>
                <p class="text-3xl font-extrabold text-slate-900 mt-2">{{ totalTeamMembers }}</p>
              </div>
              <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center">
                <i class="fa-solid fa-users text-indigo-600 text-2xl"></i>
              </div>
            </div>
          </div>
          <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-500 font-medium">Overall Team Progress</p>
                <p class="text-3xl font-extrabold text-slate-900 mt-2">{{ getTeamProgressPercentage() }}<span class="text-xl">%</span></p>
              </div>
              <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                <i class="fa-solid fa-check-circle text-green-600 text-2xl"></i>
              </div>
            </div>
          </div>
          <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-500 font-medium">Assigned Trainings</p>
                <p class="text-3xl font-extrabold text-slate-900 mt-2">{{ assignedTrainingsCount }}</p>
              </div>
              <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                <i class="fa-solid fa-paper-plane text-yellow-600 text-2xl"></i>
              </div>
            </div>
          </div>
          <div #animatedElement (click)="openDetailModal('additionalSkills')" class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-500 font-medium">My Additional Skills</p>
                <p class="text-3xl font-extrabold text-slate-900 mt-2">{{ additionalSkills.length }}</p>
              </div>
              <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                <i class="fa-solid fa-star text-purple-600 text-2xl"></i>
              </div>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
          <div #animatedElement class="animate-on-scroll lg:col-span-3 bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6">
            <h3 class="text-xl font-bold text-slate-900 mb-4">Quick Actions</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <button (click)="selectTab('mySkills')" class="group flex flex-col items-center p-4 bg-slate-50/70 hover:bg-white rounded-xl transition-all duration-300 border-2 border-transparent hover:border-indigo-400 hover:shadow-lg text-center">
                <div class="w-12 h-12 mb-2 rounded-full flex items-center justify-center bg-gradient-to-br from-indigo-100 to-indigo-50 group-hover:scale-110 transition-transform">
                  <i class="fa-solid fa-user-gear text-indigo-600 text-lg"></i>
                </div>
                <div class="font-bold text-slate-900 text-sm">My Skills</div>
              </button>
              <button (click)="selectTab('teamSkills')" class="group flex flex-col items-center p-4 bg-slate-50/70 hover:bg-white rounded-xl transition-all duration-300 border-2 border-transparent hover:border-green-400 hover:shadow-lg text-center">
                <div class="w-12 h-12 mb-2 rounded-full flex items-center justify-center bg-gradient-to-br from-green-100 to-green-50 group-hover:scale-110 transition-transform">
                  <i class="fa-solid fa-users text-green-600 text-lg"></i>
                </div>
                <div class="font-bold text-slate-900 text-sm">Team Skills</div>
              </button>
              <button (click)="selectTab('assignTraining')" class="group flex flex-col items-center p-4 bg-slate-50/70 hover:bg-white rounded-xl transition-all duration-300 border-2 border-transparent hover:border-orange-400 hover:shadow-lg text-center">
                <div class="w-12 h-12 mb-2 rounded-full flex items-center justify-center bg-gradient-to-br from-orange-100 to-orange-50 group-hover:scale-110 transition-transform">
                  <i class="fa-solid fa-laptop-code text-orange-600 text-lg"></i>
                </div>
                <div class="font-bold text-slate-900 text-sm">Assign Training</div>
              </button>
              <button (click)="selectTab('reports')" class="group flex flex-col items-center p-4 bg-slate-50/70 hover:bg-white rounded-xl transition-all duration-300 border-2 border-transparent hover:border-purple-400 hover:shadow-lg text-center">
                <div class="w-12 h-12 mb-2 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-100 to-purple-50 group-hover:scale-110 transition-transform">
                  <i class="fa-solid fa-chart-bar text-purple-600 text-lg"></i>
                </div>
                <div class="font-bold text-slate-900 text-sm">Reports</div>
              </button>
            </div>
          </div>
          <div #animatedElement class="animate-on-scroll lg:col-span-2 bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6">
            <h3 class="text-xl font-bold text-slate-900 mb-4">Top 3 Skill Gaps</h3>
            <div *ngIf="topSkillGaps.length > 0" class="space-y-3">
              <div *ngFor="let gap of topSkillGaps" class="flex justify-between items-center bg-slate-50/70 p-3 rounded-lg">
                <span class="font-bold text-slate-800 text-base">{{ gap.skill }}</span>
                <span class="px-3 py-1 text-sm font-semibold text-red-700 bg-red-100 rounded-full">{{ gap.count }} gaps</span>
              </div>
            </div>
            <p *ngIf="topSkillGaps.length === 0 && totalTeamMembers > 0" class="text-center text-slate-500 mt-4">
              Excellent! Your team has no skill gaps.
            </p>
             <p *ngIf="topSkillGaps.length === 0 && totalTeamMembers === 0" class="text-center text-slate-500 mt-4">
              Add team members to see skill gaps.
            </p>
          </div>
        </div>
      </div>
      
      <div *ngIf="!isLoading && !errorMessage && activeTab === 'mySkills' && manager" class="space-y-6">
        <h2 #animatedElement class="animate-on-scroll text-3xl font-bold text-slate-800">My Skills and Competencies</h2>
        <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-4">
          <div class="flex flex-wrap items-center justify-between gap-4">
            <div class="flex items-center gap-3 text-slate-800">
              <i class="fa-solid fa-filter text-indigo-500"></i>
              <h3 class="text-md font-semibold">Filter Skills</h3>
            </div>
            <div class="flex flex-wrap items-center gap-3">
              <div class="relative">
                <i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
                <input type="text" [(ngModel)]="mySkillsSearch" placeholder="Search..." class="w-full sm:w-40 pl-9 pr-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white/80 transition-all duration-300 focus:w-56">
              </div>
              <select [(ngModel)]="mySkillsStatusFilter" class="w-full sm:w-auto appearance-none px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white cursor-pointer">
                <option value="All">All Status</option>
                <option value="Met">Met</option>
                <option value="Gap">Gap</option>
              </select>
              <select [(ngModel)]="mySkillsSkillFilter" class="w-full sm:w-auto appearance-none px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white cursor-pointer">
                <option value="All">All Skills</option>
                <option *ngFor="let skill of uniqueMySkills" [value]="skill">{{ skill }}</option>
              </select>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div #animatedElement *ngFor="let competency of getFilteredMySkills()" class="animate-on-scroll relative overflow-hidden bg-sky-50/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white/20 hover:shadow-xl hover:-translate-y-1 transition-all duration-300"
            [ngClass]="{
              'border-t-4 border-green-500': competency.status === 'Met',
              'border-t-4 border-orange-500': competency.status === 'Gap',
              'border-t-4 border-red-500': competency.status === 'Error'
            }">
            <div class="flex flex-col justify-between h-full">
              <div class="flex items-start justify-between mb-4">
                <div class="flex items-center space-x-4">
                  <div class="w-12 h-12 bg-indigo-500 text-white rounded-lg flex items-center justify-center text-xl shadow-md"><i class="fa-solid fa-graduation-cap"></i></div>
                  <div>
                    <h3 class="font-extrabold text-xl text-slate-900">{{ competency.skill }}</h3>
                    <span class="text-sm font-medium text-slate-500">{{ competency.competency || 'Skill' }}</span>
                  </div>
                </div>
                <span class="px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wider" [ngClass]="{
                  'bg-green-100/70 text-green-800': competency.status === 'Met',
                  'bg-orange-100/70 text-orange-800': competency.status === 'Gap',
                  'bg-red-100/70 text-red-800': competency.status === 'Error'
                }">{{ competency.status }}</span>
              </div>
              <div class="space-y-4">
                <div class="flex justify-between items-center text-sm">
                  <div class="flex items-center text-slate-600"><i class="fa-solid fa-bullseye text-slate-400 mr-2 w-4 text-center"></i>Current: <span class="ml-1.5 font-semibold text-slate-900">{{ competency.current_expertise }}</span></div>
                  <div class="flex items-center text-slate-600"><i class="fa-solid fa-rocket text-slate-400 mr-2 w-4 text-center"></i>Target: <span class="ml-1.5 font-semibold text-slate-900">{{ competency.target_expertise }}</span></div>
                </div>
                <div class="w-full bg-slate-200/70 rounded-full h-3 overflow-hidden shadow-inner">
                  <div class="h-full rounded-full transition-all duration-700" [ngClass]="{
                    'bg-gradient-to-r from-green-400 to-emerald-500': competency.status === 'Met',
                    'bg-gradient-to-r from-orange-400 to-amber-500': competency.status === 'Gap',
                    'bg-gradient-to-r from-red-400 to-rose-500': competency.status === 'Error'
                  }" [style.width.%]="getSkillProgress(competency)"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm border border-white/20 rounded-2xl shadow-lg">
          <div class="px-6 py-4 border-b border-slate-200/60">
            <div class="flex items-center justify-between">
              <div>
                <h3 class="text-lg font-semibold text-slate-900">My Additional Skills Portfolio</h3>
                <p class="text-sm text-slate-600">Personal skills and expertise beyond core competencies</p>
              </div>
              <div class="flex items-center space-x-3">
                <div class="bg-indigo-50 rounded-lg px-3 py-1"><span class="text-sm font-medium text-indigo-700">{{ additionalSkills.length }} skills</span></div>
                <button (click)="toggleAddSkillForm()" class="bg-slate-600 hover:bg-slate-700 text-white rounded-lg px-4 py-2 transition-all duration-200 flex items-center gap-2">
                  <i class="fa-solid fa-plus text-sm" [ngClass]="{'fa-rotate-45': showAddSkillForm}"></i><span class="text-sm font-medium">{{ showAddSkillForm ? 'Cancel' : 'Add Skill' }}</span>
                </button>
              </div>
            </div>
          </div>
          <div class="p-6">
            <div *ngIf="showAddSkillForm" class="bg-slate-50/70 border border-slate-200/80 rounded-lg p-6 mb-6">
              <h4 class="text-lg font-semibold text-slate-900 mb-4">{{ editingSkillId ? 'Edit Skill' : 'Add New Skill' }}</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-slate-700 mb-2">Skill Name *</label>
                  <input type="text" [(ngModel)]="newSkill.name" placeholder="e.g., Python Programming, Public Speaking" class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-slate-500 focus:border-transparent outline-none transition-all duration-200">
                </div>
                <div>
                  <label class="block text-sm font-medium text-slate-700 mb-2">Skill Level</label>
                  <select [(ngModel)]="newSkill.level" class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-slate-500 focus:border-transparent outline-none transition-all duration-200">
                    <option *ngFor="let level of additionalSkillLevels" [value]="level">{{ level }}</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-slate-700 mb-2">Category</label>
                  <select [(ngModel)]="newSkill.category" class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-slate-500 focus:border-transparent outline-none transition-all duration-200">
                    <option *ngFor="let category of skillCategories" [value]="category">{{ category }}</option>
                  </select>
                </div>
                <div class="md:col-span-2">
                  <label class="block text-sm font-medium text-slate-700 mb-2">Description (Optional)</label>
                  <input type="text" [(ngModel)]="newSkill.description" placeholder="Brief description of your experience" class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-slate-500 focus:border-transparent outline-none transition-all duration-200">
                </div>
              </div>
              <div class="flex items-center justify-end space-x-3 mt-6">
                <button (click)="toggleAddSkillForm()" class="px-4 py-2 text-slate-600 hover:text-slate-800 font-medium transition-colors duration-200">Cancel</button>
                <button (click)="addNewSkill()" [disabled]="!newSkill.name || !newSkill.name.trim()" class="px-4 py-2 bg-slate-600 text-white rounded-lg font-medium hover:bg-slate-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-all duration-200">{{ editingSkillId ? 'Update Skill' : 'Add Skill' }}</button>
              </div>
            </div>
            <div *ngIf="additionalSkills.length > 0" class="space-y-3">
              <div *ngFor="let skill of additionalSkills; let i = index" class="bg-white/70 border border-slate-200/80 rounded-lg p-4 hover:shadow-sm transition-all duration-200">
                <div class="flex items-center justify-between">
                  <div class="flex-1">
                    <div class="flex items-center space-x-3 mb-2">
                      <div class="w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center"><i class="fa-solid fa-star text-slate-600 text-sm"></i></div>
                      <div>
                        <h4 class="font-semibold text-slate-900">{{ skill.skill_name }}</h4>
                        <div class="flex items-center space-x-2 mt-1">
                          <span class="px-2 py-1 rounded text-xs font-medium" [ngClass]="getSkillLevelColor(skill.skill_level)">{{ skill.skill_level }}</span>
                          <span class="px-2 py-1 rounded text-xs font-medium" [ngClass]="getCategoryColor(skill.skill_category)">{{ skill.skill_category }}</span>
                        </div>
                      </div>
                    </div>
                    <p *ngIf="skill.description" class="text-slate-600 text-sm ml-11">{{ skill.description }}</p>
                  </div>
                  <div class="flex items-center space-x-2">
                    <div class="text-right mr-4">
                      <div class="text-xs text-slate-500">Added</div>
                      <div class="text-xs text-slate-700">{{ skill.created_at | date:'MMM d, y' }}</div>
                    </div>
                    <button (click)="editAdditionalSkill(skill)" class="p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-50 rounded-lg transition-all duration-200"><i class="fa-solid fa-edit text-sm"></i></button>
                    <button (click)="removeAdditionalSkill(skill.id)" class="p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200"><i class="fa-solid fa-trash text-sm"></i></button>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="additionalSkills.length === 0 && !showAddSkillForm" class="text-center py-12 bg-slate-50/70 rounded-lg border-2 border-dashed border-slate-300">
              <div class="w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center mx-auto mb-4"><i class="fa-solid fa-plus text-slate-500 text-lg"></i></div>
              <h4 class="text-lg font-semibold text-slate-900 mb-2">Build Your Skills Portfolio</h4>
              <p class="text-slate-600 mb-6 max-w-md mx-auto">Showcase additional skills and expertise that complement your core competencies</p>
              <button (click)="toggleAddSkillForm()" class="bg-slate-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-slate-700 transition-all duration-200">Add Your First Skill</button>
            </div>
          </div>
        </div>
      </div>
 
      <div *ngIf="!isLoading && !errorMessage && activeTab === 'teamSkills' && manager" class="space-y-6">
        <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden">
          <div class="bg-gradient-to-r from-indigo-600 to-blue-600 px-8 py-6 text-white">
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-3xl font-bold">Team Skills Management</h2>
                <p class="text-indigo-100 mt-1">Monitor and manage your team's skill development</p>
              </div>
              <div class="bg-white bg-opacity-20 rounded-full p-3"><i class="fa-solid fa-users text-2xl"></i></div>
            </div>
          </div>
          <div class="px-8 py-6 bg-slate-50/70 border-b border-slate-200/60">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
              <div>
                <label for="team-name-filter" class="block text-sm font-semibold text-slate-700 mb-2"><i class="fa-solid fa-user mr-2 text-indigo-600"></i>Filter by Team Member</label>
                <select id="team-name-filter" [(ngModel)]="teamMemberNameFilter" class="block w-full rounded-lg border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm p-3 bg-white">
                  <option value="All">All Members ({{ manager.team.length }})</option>
                  <option *ngFor="let member of uniqueTeamMembers" [value]="member">{{ member }}</option>
                </select>
              </div>
              <div>
                <label for="team-skill-filter" class="block text-sm font-semibold text-slate-700 mb-2 transition-colors" [ngClass]="{'text-slate-400': teamCompetencyFilter !== 'All'}"><i class="fa-solid fa-brain mr-2 text-green-600"></i>Filter by Skill</label>
                <select id="team-skill-filter" [(ngModel)]="teamSkillsSkillFilter" [disabled]="teamCompetencyFilter !== 'All'" title="{{ teamCompetencyFilter !== 'All' ? 'Clear the Competency filter to enable this' : 'Filter by skill name' }}" class="block w-full rounded-lg border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm p-3 bg-white disabled:bg-slate-200 disabled:cursor-not-allowed">
                  <option value="All">All Skills ({{ uniqueTeamSkills.length }})</option>
                  <option *ngFor="let skill of uniqueTeamSkills" [value]="skill">{{ skill }}</option>
                </select>
              </div>
              <div>
                <label for="team-competency-filter" class="block text-sm font-semibold text-slate-700 mb-2 transition-colors" [ngClass]="{'text-slate-400': teamSkillsSkillFilter !== 'All'}"><i class="fa-solid fa-cogs mr-2 text-orange-600"></i>Filter by Competency</label>
                <select id="team-competency-filter" [(ngModel)]="teamCompetencyFilter" [disabled]="teamSkillsSkillFilter !== 'All'" title="{{ teamSkillsSkillFilter !== 'All' ? 'Clear the Skill filter to enable this' : 'Filter by competency' }}" class="block w-full rounded-lg border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm p-3 bg-white disabled:bg-slate-200 disabled:cursor-not-allowed">
                  <option value="All">All Competencies ({{ uniqueCompetencies.length }})</option>
                  <option *ngFor="let competency of uniqueCompetencies" [value]="competency">{{ competency }}</option>
                </select>
              </div>
              <div>
                <label for="team-skill-level-filter" class="block text-sm font-semibold text-slate-700 mb-2 transition-colors" [ngClass]="{'text-slate-400': teamSkillsSkillFilter === 'All' && teamCompetencyFilter === 'All'}"><i class="fa-solid fa-signal mr-2 text-indigo-600"></i>Filter by Current Level</label>
                <select id="team-skill-level-filter" [(ngModel)]="teamSkillsCurrentLevelFilter" [disabled]="teamSkillsSkillFilter === 'All' && teamCompetencyFilter === 'All'" title="{{ (teamSkillsSkillFilter === 'All' && teamCompetencyFilter === 'All') ? 'Select a Skill or Competency to enable this filter' : 'Filter by current level' }}" class="block w-full rounded-lg border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm p-3 bg-white disabled:bg-slate-200 disabled:cursor-not-allowed">
                  <option value="All">All Levels</option>
                  <option *ngFor="let level of skillLevelsForFilter" [value]="level">{{ level }}</option>
                </select>
              </div>
              <div>
                <label for="team-status-filter" class="block text-sm font-semibold text-slate-700 mb-2 transition-colors"><i class="fa-solid fa-chart-line mr-2 text-purple-600"></i>Filter by Status</label>
                <select id="team-status-filter" [(ngModel)]="teamSkillsStatusFilter" class="block w-full rounded-lg border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm p-3 bg-white">
                  <option value="All">All Status</option>
                  <option value="Met">✅ Skills Met</option>
                  <option value="Gap">⚠️ Skills Gap</option>
                </select>
              </div>
            </div>
          </div>
          <div *ngIf="!selectedTeamMember" class="p-8">
            <p *ngIf="filteredTeamMembers.length === 0" class="text-center text-slate-500 py-12">No team members match your selected filters.</p>
            <div *ngIf="filteredTeamMembers.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
              <div #animatedElement *ngFor="let member of filteredTeamMembers" (click)="viewMemberDetails(member)" class="animate-on-scroll bg-white/70 backdrop-blur-sm rounded-2xl p-6 flex flex-col items-center text-center shadow-lg border border-transparent hover:border-indigo-300 hover:shadow-2xl transition-all duration-300 cursor-pointer">
                <div class="relative mb-4">
                  <img src="https://ui-avatars.com/api/?name={{member.name}}&background=random&color=fff&size=80" alt="avatar" class="rounded-full h-20 w-20 ring-4 ring-indigo-500 ring-opacity-50">
                  <span *ngIf="getTeamSkillsMetCount(member) === member.skills.length" class="absolute bottom-0 right-0 transform translate-x-1/4 translate-y-1/4 bg-green-500 text-white rounded-full p-2 text-xs"><i class="fa-solid fa-check"></i></span>
                </div>
                <h3 class="font-bold text-xl text-slate-900">{{ member.name }}</h3>
                <p class="text-sm text-slate-500 mt-1"><span class="font-semibold">{{ getTeamSkillsMetCount(member) }}</span> out of <span class="font-semibold">{{ member.skills.length }}</span> skills met</p>
                <div class="relative w-24 h-24 my-4 flex items-center justify-center">
                  <svg class="w-full h-full transform -rotate-90">
                    <circle class="text-slate-200" stroke-width="8" stroke="currentColor" fill="transparent" r="40" cx="48" cy="48" />
                    <circle class="text-indigo-600" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="40" cx="48" cy="48"
                      [style.stroke-dasharray]="2 * 3.14 * 40"
                      [style.stroke-dashoffset]="(2 * 3.14 * 40) - (2 * 3.14 * 40 * (calculateProgress(member.skills) / 100))"
                      style="transition: stroke-dashoffset 0.5s ease-in-out;">
                    </circle>
                  </svg>
                  <span class="absolute text-2xl font-bold text-slate-800">{{ calculateProgress(member.skills) | number:'1.0-0' }}%</span>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="selectedTeamMember" class="p-8 bg-slate-50/70 border-t border-slate-200/60">
            <div class="flex items-center justify-between mb-6">
              <div><h3 class="text-2xl font-bold text-slate-800">Core Skills for {{ selectedTeamMember.name }}</h3></div>
              <button (click)="clearMemberDetails()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition-colors"><i class="fa-solid fa-arrow-left mr-2"></i>Back to Team</button>
            </div>
            <div *ngIf="successMessage" class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg mb-4" role="alert">
              <strong class="font-bold">Success!</strong>
              <span class="block sm:inline ml-2">{{ successMessage }}</span>
            </div>
            <div class="bg-white/80 rounded-xl shadow-md overflow-hidden">
              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-slate-200">
                  <thead class="bg-slate-50/70">
                    <tr>
                      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Skill</th>
                      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Competency</th>
                      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Current Level</th>
                      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Target Level</th>
                      <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Status</th>
                      <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider">Actions</th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-slate-200">
                    <ng-container *ngFor="let skill of selectedTeamMember.skills; let i = index">
                      <tr [ngClass]="{'bg-indigo-50': isEditingSkill(selectedTeamMember.id, i)}">
                        <td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-semibold text-slate-900">{{ skill.skill }}</div></td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-600">{{ skill.competency }}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-600">
                          <span *ngIf="!isEditingSkill(selectedTeamMember.id, i)">{{ skill.current_expertise }}</span>
                          <select *ngIf="isEditingSkill(selectedTeamMember.id, i)" [(ngModel)]="editSkillData.current_expertise" class="rounded-lg border-slate-300 text-sm px-3 py-2">
                            <option *ngFor="let level of skillLevels" [value]="level">{{ level }}</option>
                          </select>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-600">
                          <span *ngIf="!isEditingSkill(selectedTeamMember.id, i)">{{ skill.target_expertise }}</span>
                          <select *ngIf="isEditingSkill(selectedTeamMember.id, i)" [(ngModel)]="editSkillData.target_expertise" class="rounded-lg border-slate-300 text-sm px-3 py-2">
                            <option *ngFor="let level of skillLevels" [value]="level">{{ level }}</option>
                          </select>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full" [ngClass]="{'bg-green-100 text-green-800': skill.status === 'Met', 'bg-orange-100 text-orange-800': skill.status === 'Gap'}">{{ skill.status }}</span></td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                          <ng-container *ngIf="!isEditingSkill(selectedTeamMember.id, i)">
                            <button (click)="startEditSkill(selectedTeamMember.id, i)" class="text-indigo-600 hover:text-indigo-900 transition-colors">Edit</button>
                          </ng-container>
                          <ng-container *ngIf="isEditingSkill(selectedTeamMember.id, i)">
                            <div class="flex space-x-2">
                              <button (click)="saveSkillEdit()" class="px-3 py-1 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm transition-colors">Save</button>
                              <button (click)="cancelEditSkill()" class="px-3 py-1 text-slate-600 border border-slate-300 rounded-md hover:bg-slate-100 text-sm transition-colors">Cancel</button>
                            </div>
                          </ng-container>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="mt-8">
              <h3 class="text-2xl font-bold text-slate-800 mb-4">Additional Skills</h3>
              <div *ngIf="selectedTeamMember.additional_skills && selectedTeamMember.additional_skills.length > 0" class="space-y-3">
                <div *ngFor="let skill of selectedTeamMember.additional_skills" class="bg-white/80 border border-slate-200/80 rounded-lg p-4 hover:shadow-sm transition-all duration-200">
                  <div class="flex items-center justify-between">
                    <div class="flex-1">
                      <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center"><i class="fa-solid fa-star text-slate-600 text-sm"></i></div>
                        <div>
                          <h4 class="font-semibold text-slate-900">{{ skill.skill_name }}</h4>
                          <div class="flex items-center space-x-2 mt-1">
                            <span class="px-2 py-1 rounded text-xs font-medium" [ngClass]="getSkillLevelColor(skill.skill_level)">{{ skill.skill_level }}</span>
                            <span class="px-2 py-1 rounded text-xs font-medium" [ngClass]="getCategoryColor(skill.skill_category)">{{ skill.skill_category }}</span>
                          </div>
                        </div>
                      </div>
                      <p *ngIf="skill.description" class="text-slate-600 text-sm ml-11 mt-2">{{ skill.description }}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngIf="!selectedTeamMember.additional_skills || selectedTeamMember.additional_skills.length === 0" class="text-center py-12 bg-white/80 rounded-lg border-2 border-dashed border-slate-300">
                <div class="w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center mx-auto mb-4"><i class="fa-solid fa-folder-open text-slate-500 text-lg"></i></div>
                <h4 class="text-lg font-semibold text-slate-900">No Additional Skills</h4>
                <p class="text-slate-600">This team member has not added any additional skills.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
 
      <div *ngIf="!isLoading && !errorMessage && activeTab === 'trainingCatalog' && manager" class="space-y-6">
        <div #animatedElement class="animate-on-scroll"><h2 class="text-3xl font-bold text-slate-800">Training Catalog</h2><p class="text-slate-500 mt-1">Browse available training sessions for your team.</p></div>
        <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-4">
          <div class="flex flex-wrap items-center justify-between gap-4">
            <div class="flex items-center gap-3 text-slate-800"><i class="fa-solid fa-filter text-indigo-500"></i><h3 class="text-md font-semibold">Filter Trainings</h3></div>
            <div class="flex flex-wrap items-center gap-3">
              <div class="relative">
                <i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
                <input type="text" [(ngModel)]="catalogSearch" placeholder="Search..." class="w-full sm:w-40 pl-9 pr-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white/80 transition-all duration-300 focus:w-56" />
              </div>
              <select [(ngModel)]="catalogTypeFilter" class="w-full sm:w-auto appearance-none px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white cursor-pointer">
                <option>All</option><option>Online</option><option>In-Person</option><option>Hybrid</option>
              </select>
              <select [(ngModel)]="catalogCategoryFilter" class="w-full sm:w-auto appearance-none px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white cursor-pointer">
                <option>All</option><option *ngFor="let level of skillCategoryLevels">{{ level }}</option>
              </select>
              <button (click)="catalogSearch=''; catalogTypeFilter='All'; catalogCategoryFilter='All'" title="Reset Filters" class="w-9 h-9 flex items-center justify-center text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors"><i class="fa-solid fa-rotate-right"></i></button>
            </div>
          </div>
        </div>
        <div *ngIf="filteredCatalog.length === 0" #animatedElement class="animate-on-scroll text-center py-20 bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border-2 border-dashed border-slate-300">
          <div class="w-20 h-20 bg-gradient-to-br from-indigo-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6"><i class="fa-solid fa-folder-open text-indigo-500 text-4xl"></i></div>
          <h4 class="text-2xl font-bold text-slate-800 mb-2">The Catalog is Empty</h4>
          <p class="text-slate-600 max-w-md mx-auto">There are currently no training sessions scheduled. As a trainer, you can schedule a new one from the Trainer Zone.</p>
        </div>
        <div *ngIf="filteredCatalog.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div #animatedElement *ngFor="let training of filteredCatalog" class="animate-on-scroll group bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-slate-200/60 overflow-hidden transform hover:-translate-y-1.5 transition-all duration-300 ease-in-out hover:shadow-2xl flex flex-col">
            <div class="h-2 bg-gradient-to-r from-indigo-500 to-sky-400"></div>
            <div class="p-6 flex-grow flex flex-col">
              <div class="flex items-start gap-4 mb-4">
                <div class="flex-shrink-0 w-12 h-12 bg-slate-100 text-indigo-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300"><i class="fa-solid fa-laptop-code text-2xl"></i></div>
                <div><h3 class="text-lg font-bold leading-tight text-slate-800">{{ training.training_name }}</h3><p class="text-sm text-slate-500">by {{ training.trainer_name }}</p></div>
              </div>
              <div class="flex items-center gap-2 flex-wrap mb-4">
                <span class="inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-indigo-100 text-indigo-800 ring-1 ring-inset ring-indigo-200"><i class="fa-solid fa-display mr-1.5"></i>{{ training.training_type || 'N/A' }}</span>
                <span class="inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-violet-100 text-violet-800 ring-1 ring-inset ring-violet-200"><i class="fa-solid fa-layer-group mr-1.5"></i>{{ training.skill_category || 'N/A' }}</span>
                <span class="inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-rose-100 text-rose-800 ring-1 ring-inset ring-rose-200" *ngIf="training.seats"><i class="fa-solid fa-users mr-1.5"></i>{{ training.seats }} Seats</span>
              </div>
              <div class="flex-grow text-sm text-slate-600 mb-4"><p><strong class="font-semibold text-slate-700">Topics:</strong> {{ training.training_topics || 'Not specified' }}</p></div>
              <div class="pt-4 mt-auto border-t border-slate-200/80 space-y-2 text-sm">
                <div class="flex items-center justify-between text-slate-600">
                  <div class="flex items-center gap-2"><i class="fa-solid fa-calendar-days text-slate-400 w-4 text-center"></i><span class="font-medium text-slate-800">{{ training.training_date ? (training.training_date | date:'mediumDate') : 'Date TBD' }}</span></div>
                  <div class="flex items-center gap-2"><i class="fa-solid fa-clock text-slate-400 w-4 text-center"></i><span class="font-medium text-slate-800">{{ training.time || 'Time TBD' }}</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="!isLoading && !errorMessage && activeTab === 'assignTraining' && manager" class="space-y-6">
        <div #animatedElement class="animate-on-scroll"><h2 class="text-3xl font-bold text-slate-800">Assign Training</h2><p class="text-slate-500 mt-1">Visually assign training modules to your team members.</p></div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div class="lg:col-span-2 space-y-6">
            <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6">
              <div class="flex items-center justify-between gap-4 mb-4">
                <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-lg font-bold ring-4 ring-indigo-50">1</div>
                <h3 class="text-xl font-bold text-slate-800 flex-1">Select a Training Module</h3>
                <div class="relative w-64"><i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i><input [(ngModel)]="assignTrainingSearch" placeholder="Search training..." class="w-full pl-9 pr-3 py-2 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none" /></div>
              </div>
              <div *ngIf="filteredAssignTrainings.length > 0" class="grid grid-cols-1 md:grid-cols-2 gap-4 max-h-80 overflow-y-auto pr-2">
                <div *ngFor="let training of filteredAssignTrainings" (click)="selectedTraining = training.id" [ngClass]="{'ring-2 ring-indigo-500 bg-indigo-50/50': selectedTraining === training.id, 'hover:bg-slate-50': selectedTraining !== training.id}" class="p-4 rounded-xl border cursor-pointer transition-all duration-200">
                  <div class="flex items-start gap-3">
                    <div class="flex-shrink-0 w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center"><i class="fa-solid fa-laptop-code text-slate-500"></i></div>
                    <div class="flex-1 min-w-0">
                      <h4 class="font-bold text-slate-900 leading-tight truncate">{{ training.training_name }}</h4>
                      <div class="flex flex-wrap gap-2 mt-1">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-sky-100 text-sky-700"><i class="fa-solid fa-display mr-1"></i>{{ training.training_type || 'N/A' }}</span>
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-emerald-100 text-emerald-700"><i class="fa-solid fa-user mr-1"></i>{{ training.trainer_name }}</span>
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-violet-100 text-violet-700" *ngIf="training.skill_category"><i class="fa-solid fa-layer-group mr-1"></i>{{ training.skill_category }}</span>
                      </div>
                    </div>
                    <i *ngIf="selectedTraining === training.id" class="fa-solid fa-circle-check text-indigo-500 ml-auto"></i>
                  </div>
                </div>
              </div>
              <div *ngIf="filteredAssignTrainings.length === 0" class="text-center p-4 bg-yellow-50 text-yellow-700 rounded-lg border border-yellow-200">No training sessions are available to assign.</div>
            </div>
            <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6">
              <div class="flex items-center justify-between gap-4 mb-4">
                <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-lg font-bold ring-4 ring-indigo-50">2</div>
                <h3 class="text-xl font-bold text-slate-800 flex-1">Select a Team Member</h3>
                <div class="relative w-64"><i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i><input [(ngModel)]="assignMemberSearch" placeholder="Search member..." class="w-full pl-9 pr-3 py-2 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none" /></div>
              </div>
              <div *ngIf="filteredAssignMembers.length > 0" class="grid grid-cols-1 md:grid-cols-2 gap-4 max-h-80 overflow-y-auto pr-2">
                <div *ngFor="let member of filteredAssignMembers" (click)="selectedMemberId = member.id" [ngClass]="{'ring-2 ring-indigo-500 bg-indigo-50/50': selectedMemberId === member.id, 'hover:bg-slate-50': selectedMemberId !== member.id}" class="p-4 rounded-xl border cursor-pointer transition-all duration-200">
                  <div class="flex items-center gap-3">
                    <img src="https://ui-avatars.com/api/?name={{member.name}}&background=random&color=fff&size=40" alt="avatar" class="rounded-full h-10 w-10">
                    <span class="font-bold text-slate-900">{{ member.name }}</span>
                    <i *ngIf="selectedMemberId === member.id" class="fa-solid fa-circle-check text-indigo-500 ml-auto"></i>
                  </div>
                </div>
              </div>
              <div *ngIf="filteredAssignMembers.length === 0" class="text-center p-4 bg-yellow-50 text-yellow-700 rounded-lg border border-yellow-200">You have no team members to assign training to.</div>
            </div>
          </div>
          <div class="lg:col-span-1">
            <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6 sticky top-28">
              <h3 class="text-xl font-bold text-slate-800 mb-4 border-b pb-3">Assignment Summary</h3>
              <div class="space-y-6 mt-4">
                <div>
                  <label class="text-sm font-semibold text-slate-500">TRAINING</label>
                  <div class="mt-2 p-4 min-h-[6rem] bg-slate-50 rounded-lg flex items-center justify-center text-center"><span class="font-bold text-slate-800" [ngClass]="{'text-slate-400': !selectedTraining}">{{ getSelectedTrainingName() }}</span></div>
                </div>
                <div class="flex items-center justify-center"><i class="fa-solid fa-arrow-down text-2xl text-slate-300"></i></div>
                <div>
                  <label class="text-sm font-semibold text-slate-500">TEAM MEMBER</label>
                  <div class="mt-2 p-4 min-h-[6rem] bg-slate-50 rounded-lg flex items-center justify-center text-center"><span class="font-bold text-slate-800" [ngClass]="{'text-slate-400': !selectedMemberId}">{{ getSelectedMemberName() }}</span></div>
                </div>
              </div>
              <div class="mt-6 pt-6 border-t">
                <button (click)="assignTraining()" [disabled]="!selectedTraining || !selectedMemberId" class="w-full bg-indigo-600 text-white px-4 py-3 rounded-lg font-semibold hover:bg-indigo-700 disabled:bg-slate-400 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-indigo-300"><i class="fa-solid fa-paper-plane mr-2"></i>Confirm Assignment</button>
              </div>
            </div>
          </div>
        </div>
      </div>
 
      <div *ngIf="!isLoading && !errorMessage && activeTab === 'trainerZone' && manager" class="space-y-6">
        <div #animatedElement class="animate-on-scroll relative bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-2xl shadow-2xl shadow-indigo-900/20 overflow-hidden">
          <div class="absolute -right-20 -bottom-20 opacity-20">
            <i class="fa-solid fa-chalkboard-user text-[250px] transform rotate-[-20deg]"></i>
          </div>
          <div class="relative z-10 p-8">
            <h2 class="text-3xl font-bold">Trainer Zone</h2>
            <p class="text-indigo-100 mt-2 max-w-2xl">Create and manage training sessions for the entire catalog. Share your expertise and empower teams to grow their skills.</p>
            <div class="mt-6">
              <button (click)="openScheduleTrainingModal()" class="bg-white text-indigo-600 font-bold px-6 py-3 rounded-full hover:bg-indigo-100 hover:shadow-lg transition-all duration-200 transform hover:scale-105">
                <i class="fa-solid fa-plus-circle mr-2"></i>Schedule New Training
              </button>
            </div>
          </div>
        </div>

        <div #animatedElement class="animate-on-scroll">
          <h3 class="text-2xl font-bold text-slate-800 mb-4">My Created Trainings</h3>
          <div *ngIf="myTrainings.length === 0" class="text-center py-16 bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border-2 border-dashed border-slate-300">
            <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="fa-solid fa-calendar-plus text-slate-500 text-3xl"></i>
            </div>
            <h4 class="text-xl font-semibold text-slate-800 mb-1">You haven't scheduled any training yet.</h4>
            <p class="text-slate-500">Click the button above to create your first session.</p>
          </div>
          
          <div *ngIf="myTrainings.length > 0" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div *ngFor="let training of myTrainings" class="bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-slate-200/60 p-5">
                <div class="flex items-start gap-4">
                  <div class="flex-shrink-0 w-10 h-10 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center"><i class="fa-solid fa-laptop-code"></i></div>
                  <div class="flex-1">
                    <div class="flex justify-between items-center">
                      <h4 class="font-bold text-slate-800 text-lg">{{ training.training_name }}</h4>
                      <span class="text-xs font-semibold px-2 py-1 rounded-full"
                        [ngClass]="isUpcoming(training.training_date) ? 'bg-green-100 text-green-800' : 'bg-slate-100 text-slate-600'">
                        {{ isUpcoming(training.training_date) ? 'Upcoming' : 'Past' }}
                      </span>
                    </div>
                    <div class="flex flex-wrap gap-x-4 gap-y-1 text-sm text-slate-500 mt-2">
                      <span class="flex items-center gap-1.5"><i class="fa-solid fa-calendar"></i>{{ training.training_date | date:'mediumDate' }}</span>
                      <span class="flex items-center gap-1.5"><i class="fa-solid fa-clock"></i>{{ training.time || 'N/A' }}</span>
                      <span class="flex items-center gap-1.5"><i class="fa-solid fa-users"></i>{{ training.seats || 'N/A' }} Seats</span>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </div>
 
      <div *ngIf="!isLoading && !errorMessage && activeTab === 'reports' && manager" class="space-y-6">
        <h2 #animatedElement class="animate-on-scroll text-3xl font-bold text-slate-800">Reports</h2>
        <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8 text-center">
          <div class="w-20 h-20 bg-gradient-to-br from-purple-100 to-indigo-200 rounded-full flex items-center justify-center mx-auto mb-6">
            <i class="fa-solid fa-chart-bar text-purple-500 text-4xl"></i>
          </div>
          <h4 class="text-2xl font-bold text-slate-800 mb-2">Reporting Feature Coming Soon</h4>
          <p class="text-slate-600 max-w-md mx-auto">Advanced reporting and data visualization tools will be available here in a future update.</p>
        </div>
      </div>

      <div *ngIf="!isLoading && !errorMessage && activeTab === 'levels' && manager" class="space-y-6">
        <div #animatedElement class="animate-on-scroll flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
          <h2 class="text-3xl font-bold text-slate-800">Levels Definitions</h2>
          <div class="flex flex-col sm:flex-row gap-4">
            <div class="relative">
              <select [(ngModel)]="selectedSkill" (ngModelChange)="onSkillChange()" class="w-full sm:w-64 appearance-none px-4 py-2.5 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white/80 cursor-pointer pr-12">
                <option value="">All Skills</option><option *ngFor="let section of sections" [value]="section.title">{{ section.title }}</option>
              </select>
              <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"><i class="fa-solid fa-chevron-down text-slate-500 text-xs"></i></div>
            </div>
            <input [(ngModel)]="levelsSearch" type="text" placeholder="Search levels, keywords..." class="w-full sm:w-80 px-4 py-2 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white/80" />
          </div>
        </div>
        <div #animatedElement class="animate-on-scroll bg-sky-50/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden">
          <div *ngIf="getFilteredSections().length === 0" class="p-8 text-center text-slate-500"><i class="fa-solid fa-search text-4xl mb-4"></i><p>No skills found matching your criteria.</p></div>
          <div *ngFor="let section of getFilteredSections()" class="border-b border-slate-200/60 last:border-b-0">
            <div class="bg-slate-50/70 px-6 py-4 border-b border-slate-200/60">
              <div class="flex items-center justify-between">
                <div>
                  <h3 class="text-xl font-bold text-slate-900">{{ section.title }}</h3>
                  <p *ngIf="section.subtitle" class="text-sm text-slate-600 mt-1">{{ section.subtitle }}</p>
                </div>
                <div class="text-sm text-slate-500">{{ section.levels.length }} Levels</div>
              </div>
            </div>
            <div class="p-6">
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-5">
                <div *ngFor="let lvl of section.levels; let i = index" class="bg-slate-50/70 rounded-xl border border-slate-200/80 hover:shadow-md hover:border-slate-300 transition-all duration-300 overflow-hidden">
                  <div class="px-4 py-3 border-b border-slate-200/80" [ngClass]="getLevelHeaderClass(lvl.level)">
                    <div class="flex items-center justify-between">
                      <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm" [ngClass]="getLevelBadgeClass(lvl.level)">L{{ lvl.level }}</div>
                        <div><p class="font-bold text-sm" [class.text-indigo-700]="lvl.level > 0">{{ getLevelTitle(lvl.level) }}</p></div>
                      </div>
                      <i class="text-lg" [ngClass]="getLevelIcon(lvl.level)"></i>
                    </div>
                  </div>
                  <div class="p-4">
                    <div class="space-y-2 max-h-40 overflow-y-auto pr-2">
                      <div *ngFor="let item of lvl.items" class="flex items-start space-x-2.5 text-xs">
                        <div class="w-1.5 h-1.5 rounded-full bg-indigo-400 mt-1 flex-shrink-0"></div>
                        <span class="text-slate-700 leading-relaxed">{{ item }}</span>
                      </div>
                    </div>
                    <div class="mt-4 pt-3 border-t border-slate-200/80">
                      <div class="flex items-center justify-between">
                        <span class="text-xs text-slate-500 font-medium">Complexity</span>
                        <div class="flex space-x-1">
                          <div *ngFor="let dot of getComplexityDots(lvl.level)" class="w-2 h-2 rounded-full" [ngClass]="dot ? 'bg-indigo-500' : 'bg-slate-300'"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<div *ngIf="showDetailModal" (click)="closeDetailModal()" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50">
  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl m-4 transform transition-all" (click)="$event.stopPropagation()">
    <div class="flex items-center justify-between p-6 bg-slate-50 rounded-t-2xl border-b border-slate-200">
      <h3 class="text-xl font-bold text-slate-900">{{ modalTitle }}</h3>
      <button (click)="closeDetailModal()" class="w-9 h-9 text-slate-400 hover:text-red-600 hover:bg-red-100 rounded-full flex items-center justify-center transition-colors">
        <i class="fa-solid fa-times text-lg"></i>
      </button>
    </div>
    <div class="max-h-[60vh] overflow-y-auto p-6">
      <div *ngIf="modalData.length === 0" class="text-center text-slate-500 p-8">No data to display.</div>
      
      <ul *ngIf="modalDataType === 'members'" class="space-y-3">
        <li *ngFor="let member of modalData" class="flex items-center bg-slate-50/70 p-3 rounded-lg">
          <img src="https://ui-avatars.com/api/?name={{member.name}}&background=random&color=fff&size=40" alt="avatar" class="rounded-full h-10 w-10 mr-4">
          <span class="font-semibold text-slate-800">{{ member.name }}</span>
        </li>
      </ul>

      <div *ngIf="modalDataType === 'skills'" class="space-y-3">
        <div *ngFor="let skill of modalData" class="bg-slate-50/70 p-3 rounded-lg">
          <div class="flex items-center justify-between">
            <div class="flex-1">
              <p class="font-bold text-slate-800">{{ skill.skill || skill.skill_name }}</p>
              <p *ngIf="skill.memberName" class="text-sm text-slate-500">Member: {{ skill.memberName }}</p>
            </div>
            <div *ngIf="skill.status" class="px-3 py-1 text-sm font-semibold rounded-full" [ngClass]="{'bg-green-100 text-green-700': skill.status === 'Met', 'bg-orange-100 text-orange-700': skill.status === 'Gap'}">
              {{ skill.status }}
            </div>
             <div *ngIf="skill.skill_level" class="px-3 py-1 text-sm font-semibold rounded-full" [ngClass]="getSkillLevelColor(skill.skill_level)">
              {{ skill.skill_level }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div *ngIf="showScheduleTrainingModal"
  class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50" (click)="closeScheduleTrainingModal()">
  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl m-4 transform transition-all" (click)="$event.stopPropagation()">
    <div class="flex items-center justify-between p-6 bg-slate-50 rounded-t-2xl border-b border-slate-200">
      <div class="flex items-center gap-4">
        <div class="w-12 h-12 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center">
            <i class="fa-solid fa-calendar-plus text-2xl"></i>
        </div>
        <div>
            <h3 class="text-xl font-bold text-slate-900">Schedule a New Training</h3>
            <p class="text-sm text-slate-500">Create a new session for the training catalog.</p>
        </div>
      </div>
      <button (click)="closeScheduleTrainingModal()" class="w-9 h-9 text-slate-400 hover:text-red-600 hover:bg-red-100 rounded-full flex items-center justify-center transition-colors">
        <i class="fa-solid fa-times text-lg"></i>
      </button>
    </div>
    <form (ngSubmit)="scheduleTraining()" #trainingForm="ngForm" class="max-h-[75vh] overflow-y-auto p-8">
        <div class="space-y-8">
            <fieldset>
                <legend class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4 w-full">Core Details</legend>
                <div class="space-y-5">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Training Name *</label>
                        <div class="relative">
                            <i class="fa-solid fa-laptop-code absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                            <input type="text" [(ngModel)]="newTraining.training_name" name="training_name" required placeholder="e.g., Advanced Python for Automation"
                            class="w-full pl-11 pr-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Topics Covered</label>
                        <div class="relative">
                            <i class="fa-solid fa-list-check absolute left-4 top-5 -translate-y-1/2 text-slate-400"></i>
                            <textarea [(ngModel)]="newTraining.training_topics" name="training_topics" rows="3" placeholder="List the main topics separated by commas..." class="w-full pl-11 pr-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset>
                <legend class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4 w-full">Classification</legend>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Division</label>
                        <input type="text" [(ngModel)]="newTraining.division" name="division" placeholder="e.g., R&D" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Department</label>
                        <input type="text" [(ngModel)]="newTraining.department" name="department" placeholder="e.g., Software" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Competency</label>
                        <input type="text" [(ngModel)]="newTraining.competency" name="competency" placeholder="e.g., Python" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Skill</label>
                        <select [(ngModel)]="newTraining.skill" name="skill" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white">
                            <option value="">Select Skill</option>
                            <option *ngFor="let s of uniqueTeamSkills" [value]="s">{{ s }}</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Skill Category</label>
                        <select [(ngModel)]="newTraining.skill_category" name="skill_category" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white">
                            <option *ngFor="let level of skillCategoryLevels" [value]="level">{{ level }}</option>
                        </select>
                    </div>
                </div>
            </fieldset>
            <fieldset>
                <legend class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4 w-full">Trainer Information</legend>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Trainer Name *</label>
                        <div class="relative">
                            <i class="fa-solid fa-chalkboard-user absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                            <input type="text" [(ngModel)]="newTraining.trainer_name" name="trainer_name" required placeholder="Enter trainer's full name" class="w-full pl-11 pr-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Trainer Email</label>
                        <div class="relative">
                            <i class="fa-solid fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                            <input type="email" [(ngModel)]="newTraining.email" name="email" placeholder="Enter trainer's email" class="w-full pl-11 pr-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                        </div>
                    </div>
                 </div>
            </fieldset>
            <fieldset>
                <legend class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4 w-full">Logistics & Scheduling</legend>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Date *</label>
                        <input type="date" [(ngModel)]="newTraining.training_date" name="training_date" required class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Time</label>
                        <input type="time" [(ngModel)]="newTraining.time" name="time" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Duration</label>
                        <input type="text" [(ngModel)]="newTraining.duration" name="duration" placeholder="e.g., 2 hours" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mt-5">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Training Type</label>
                        <select [(ngModel)]="newTraining.training_type" name="training_type" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none bg-white">
                            <option>Online</option>
                            <option>In-Person</option>
                            <option>Hybrid</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Available Seats</label>
                        <input type="text" [(ngModel)]="newTraining.seats" name="seats" placeholder="e.g., 25" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                </div>
            </fieldset>
            <fieldset>
                <legend class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4 w-full">Additional Information</legend>
                <div class="space-y-5">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Prerequisites</label>
                        <input type="text" [(ngModel)]="newTraining.prerequisites" name="prerequisites" placeholder="e.g., Basic Python knowledge" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Assessment Details</label>
                        <textarea [(ngModel)]="newTraining.assessment_details" name="assessment_details" rows="3" placeholder="Describe the assessment process, if any." class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="flex items-center justify-end space-x-4 pt-6 border-t border-slate-200 mt-8">
            <button type="button" (click)="closeScheduleTrainingModal()" class="px-6 py-2.5 font-semibold text-slate-600 hover:bg-slate-100 rounded-full transition-colors">Cancel</button>
            <button type="submit" [disabled]="trainingForm.invalid" class="px-7 py-2.5 bg-indigo-600 text-white rounded-full font-semibold hover:bg-indigo-700 disabled:bg-slate-400 disabled:cursor-not-allowed shadow-lg hover:shadow-indigo-300 transition-all">
                <i class="fa-solid fa-check mr-2"></i> Schedule Training
            </button>
        </div>
    </form>
  </div>
</div>
